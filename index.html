<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sky : Real Time SDR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.2/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.11.0/qs.min.js"></script>
    <script src="index.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  </head>
  <body>
    <nav class="navbar" style="background-color: #50cbfc;">
      <div class="container d-flex justify-content-between align-items-center">
          <!-- Logo on the left -->
          <a class="navbar-brand" href="https://www.sky.com/" target="_blank">
              <img src="Sky_logo.png" alt="Bootstrap" width="50" height="30">
          </a>
  
          <!-- Centered text -->
          <span class="navbar-brand mb-0 h1 flex-grow-1 text-center">
              <strong><em>Real Time SDR</em></strong>
          </span>
      </div>
    </nav>
    <div class="container my-5">
        <div class="alert alert-danger alert-dismissible fade show" role="alert" id="rsAlert" style="display: none;">
          <i class="bi bi-exclamation-circle"></i><strong class="ms-2">Oops!</strong> No Report Suite found. Please check the ID and resubmit again.
        </div>
        <div class="alert alert-warning alert-dismissible fade show" role="alert" id="sdrAlert" style="display: none;">
          <i class="bi bi-check-circle-fill"></i><strong class="ms-2">Congratulations!</strong> SDR has been successfully generated.
        </div>
      <form id="myForm" class="needs-validation" novalidate>
        <div class="row mb-3">
          <label for="rsID" class="col-sm-2 col-form-label fw-bolder">AA Report Suite ID <i class="bi bi-info-circle-fill mx-3 justify-content-end" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Please select only one report suite ID."></i></label>
          <div class="col-sm-7">
            <input type="text" class="form-control" id="rsID" placeholder="Enter your Report Suite ID here." onfocus="rsInputFocus()" required>
            <ul id="autocomplete-dropdown" class="list-group" style="max-height: 150px;overflow-y: auto;"></ul>
            <div id="emailHelp" class="form-text">Example report suite ID : <strong><em>"bskybdtmskycomprod"</em></strong></div>
            <div class="invalid-feedback" id="rsFeedback" style="display: none;">
              <em>Please provide a valid report suite ID.</em>
            </div>
          </div>
          <div class="col-sm-3">
            <button type="button" class="btn btn-primary" id="clearValue" onclick="clearButton()" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Use this button to clear the value of the report suite ID from the input field.">Clear <i class="bi bi-eraser"></i></button>
          </div>
        </div>
        <button type="submit" class="btn btn-outline-primary" id="submitButton" onclick="Submit()" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-custom-class="custom-tooltip" data-bs-title="Use this button to generate SDR based on the report suite ID.">Generate SDR <i class="bi bi-database-down"></i></button>
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <a id="reportSuites" href="https://experience.adobe.com/#/@bskyb/so:bskyb0/analytics/p/am/1.3/index.html?a=ReportSuite.Selection" target="_blank" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Use this link to view list of report suites on Adobe Analytics UI.">
            <em>Adobe Report Suite Manager.</em>
          <a/>
        </div>
        <div class="my-5">
          <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status" id="spinner" style="display: none;">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          <div class="d-grid gap-2 d-md-flex justify-content-md-end mb-3">
            <input type="text" id="searchInput" class="focus-ring" placeholder="               Search" onkeyup="searchTable()" style="display: none;" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Use this field to search anything from the SDR table.">
            <div class="btn-group" role="group" aria-label="Basic outlined example" id="exportReset" style="display: none;">
              <button type="button" class="btn btn-outline-primary" id="downloadBtn" onclick="download()" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Use this button to download the SDR table into CSV file.">Export to CSV <i class="bi bi-download"></i></button>
              <button type="button" class="btn btn-outline-secondary" onclick="resetButton()" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Use this button to reset the SDR tool.">Reset</button>
            </div>
          </div>
          <p id="sdrNote" style="display: none; color: red;"><em><strong>Important Note <i class="bi bi-pencil"></i> : </strong>Please keep the search field empty to download the full contents of SDR.</em></p>
          <table class="table table-bordered table-hover table-responsive" id="myTable" style="display: none;">
            <thead>
              <tr class="table-primary font-monospace">
                <th scope="col" class="text-start"><u>S.no</u></th>
                <th scope="col" class="text-start"><u>Adobe Variable Type</u></th>
                <th scope="col" class="text-start"><u>Adobe Variable Number</u></th>
                <th scope="col" class="text-start"><u>Adobe Variable Name</u></th>
                <th scope="col" class="text-start"><u>Description</u></th>
              </tr>
            </thead>
            <tbody id="tableBody" class="table-info table-group-divider"></tbody>
          </table>
        </div>
      </form>
    </div>
    <nav class="navbar fixed-bottom" style="background-color: #50cbfc;">
        <div class="container justify-content-center">
          <span class="navbar-brand mb-0 h1 fw-bolder fst-italic"><i class="bi bi-envelope-at-fill mx-3"></i>Admin Contact : rishabhbhalla98@gmail.com</span>
        </div>
      </nav>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (() => {
          'use strict'

          // Fetch all the forms we want to apply custom Bootstrap validation styles to
          const forms = document.querySelectorAll('.needs-validation')

          // Loop over them and prevent submission
          Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
              if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
              }

              //form.classList.add('was-validated')
            }, false)
          })
        })()
        // JS CODE FOR TOOLTIP IMPLEMENTATION
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>
  </body>
</html>